# 编辑长消息

> 学习如何使用 markdown 文件而不是聊天输入框来高效地撰写和编辑长消息。

## 为什么这很重要

想象你在处理一个复杂的任务。你需要给 Claude Code 写一个详细的提示词 — 也许需要引用多个文件、解释上下文或列出多个要求。你开始在聊天输入框中输入...

然后你意识到你在三行上面打错了一个字。或者你想重新组织你的想法。或者你意外地按了 Enter 键并发送了一条不完整的消息。

聊天输入框很适合快速提问，但对于编写更长、更深思熟虑的提示词来说很糟糕。没有简单的方法来滚动、编辑或组织你的想法。

解决方案？先在 markdown 文件中写下你的消息，然后复制粘贴到 Claude Code 中。这样你就能获得编辑器的全部功能 — 语法高亮、简单导航、撤销/重做，以及保存提示词以供参考的能力。

## 消息文件方法

不要直接在 Claude Code 中输入，而是在项目中创建一个名为 `.claude/claude-code-messages.md` 的文件。这个文件是你的"起草空间"用来撰写提示词。

该文件从 git 中被排除（通过 `.gitignore`），所以它不会散落在你的版本库中。它纯粹是为了你的便利。

它的工作原理如下：

1. 在文件中写下你的消息
2. 复制消息
3. 粘贴到 Claude Code 中
4. Claude 做出回应
5. 当你有另一条消息时，在文件中写下并重复

你可以用水平线（`----`）分隔消息来保持提示词历史。这为你创建了一个个人日志，记录你问过的内容，对于参考很有帮助。

## 从上到下写

这是一个能节省时间的实用技巧：**在文件的顶部写新消息**。

为什么？当你在大多数编辑器中打开一个文件时，光标会从顶部开始。如果你把最新的消息放在顶部，你可以快速看到你最后问过的内容而无需滚动。你的对话历史读起来很自然 — 最新的在前，最旧的在后。

你的文件结构应该看起来像这样：

```markdown
------------------------------------------------------------------------------

------------------------------------------------------------------------------

------------------------------------------------------------------------------
(你的最新消息在这里 - 在这一行上方写新消息)
------------------------------------------------------------------------------
(较新的消息)
------------------------------------------------------------------------------
(较旧的消息)
------------------------------------------------------------------------------
```

## 在消息中引用文件

使用消息文件的最常见原因之一是当你需要在项目中引用特定文件时。

当你告诉 Claude Code 查看一个文件时，你应该使用**绝对路径** — 从文件系统根目录的完整路径。这样可以消除对你要引用哪个文件的任何歧义。

在 GitHub Codespaces 或 VS Code 中，获取绝对路径很简单：

1. 在资源管理器面板（左侧边栏）中找到文件
2. 右键单击文件名
3. 选择"Copy Path"（不是"Copy Relative Path"）

你会得到类似这样的内容：

```
/workspaces/my-project/src/config.json
```

然后在你的消息中，你可以写：

```
请查看 /workspaces/my-project/src/config.json 中的配置
并提出改进建议。
```

这比在小的聊天输入框中做这件事要容易得多，因为你可以看到你在输入什么。

## 清除聊天输入

有时你开始在 Claude Code 的聊天输入框中输入并想重新开始。以下是你需要了解的内容：

- 按 **Ctrl+C 一次**清除当前输入
- 按 **Ctrl+C 两次**完全退出 Claude Code

当你粘贴了某些内容并想清除它，或者当你改变了主意想问什么时，这很有用。

## 动手练习

让我们练习你学到的东西。

**你的任务：**使用消息文件提出一个关于 Claude Code 的问题。

首先，在编辑器中打开 `.claude/claude-code-messages-example.md`。你会看到它在底部已经有一个示例消息：

```
Help me understand what I need to know from README.md
```

复制这一行并粘贴到 Claude Code 中。观看 Claude 如何读取 README 并为你总结关键点。

现在尝试在文件中写下你自己的消息。在底部添加一个新部分（在 `----` 行下方）并写下关于该项目中任何文件的问题。复制并粘贴到 Claude Code 中。

## 常见问题

**意外发送了不完整的消息**

这正是我们使用消息文件方法的原因。如果你先在文件中撰写，你可以在发送前进行审阅和编辑。现在，只需继续对话 — Claude 如果你添加更多上下文会理解。

**不确定使用哪个路径**

总是使用"Copy Path"（绝对路径），而不是"Copy Relative Path"。绝对路径从根目录（`/`）开始，包括完整的目录结构。

**文件更改未反映**

确保在复制前保存文件。大多数编辑器在标签页中显示未保存指示（如点号）。

## 导师的话：深思熟虑的沟通

当我第一次开始使用 AI 助手时，我会以意识流风格输入问题 — 只是大声思考。结果时好时坏。

随着时间的推移，我了解到 AI 响应的质量直接与提示词的质量相关。花一刻钟来组织你的想法、组织你的请求并提供清晰的背景会产生巨大的差异。

消息文件方法不仅仅是为了方便 — 它是关于建立深思熟虑沟通的习惯。这项技能可以转移到任何地方：写电子邮件、文档、代码注释，甚至与同事的对话。

你花在组织想法上的几秒钟往往会节省几分钟的来回澄清。

## 快速参考

- 消息文件位置：`.claude/claude-code-messages.md`
- 消息之间的分隔符：`----`（水平线）
- 复制文件路径：在 VS Code/Codespaces 中右键单击 → "Copy Path"
- 清除聊天输入：Ctrl+C（一次清除，两次退出）
- 在文件的顶部写新消息

## 进一步阅读

- [提示工程最佳实践](https://docs.anthropic.com/en/docs/build-with-claude/prompt-engineering)
